---
title: "Location"
description: "Location attestation methods"
---

<Warning>
  **Development Preview** — The SDK is under development.
</Warning>

<Note>
  **Separate Package** — Location attestation methods are provided by `@decentralized-geo/astral-sdk`,
  not `@decentralized-geo/astral-compute`. Install it separately:
  ```bash
  npm install @decentralized-geo/astral-sdk
  ```
</Note>

# Location Methods

The `AstralSDK` class provides methods for creating and querying location attestations.

## Setup

```typescript
import { AstralSDK } from '@decentralized-geo/astral-sdk';

const sdk = new AstralSDK({ signer: wallet });
```

## createOffchainLocationAttestation()

Create a new offchain location attestation.

```typescript
sdk.createOffchainLocationAttestation(
  params: {
    location: GeoJSON.Geometry;
    memo?: string;
  }
): Promise<LocationAttestation>
```

### Example

```typescript
import { AstralSDK } from '@decentralized-geo/astral-sdk';

const sdk = new AstralSDK({ signer: wallet });

// Create offchain attestation
const location = await sdk.createOffchainLocationAttestation({
  location: { type: 'Point', coordinates: [2.2945, 48.8584] },
  memo: 'Eiffel Tower'
});

console.log(location.uid);
console.log(location.signature);
```

---

## createOnchainLocationAttestation()

Create a new onchain location attestation.

```typescript
sdk.createOnchainLocationAttestation(
  params: {
    location: GeoJSON.Geometry;
    memo?: string;
  }
): Promise<LocationAttestation>
```

### Example

```typescript
// Create onchain attestation
const onchainLocation = await sdk.createOnchainLocationAttestation({
  location: { type: 'Point', coordinates: [2.2945, 48.8584] },
  memo: 'Eiffel Tower - Iconic Paris landmark'
});

console.log(onchainLocation.uid);  // Onchain UID
```

---

## Retrieving Attestations

<Note>
  Querying existing attestations may use the Astral API client or the EAS GraphQL API directly.
  See the [Compute API documentation](/api-reference/overview) for details on fetching attestations.
</Note>

### Example: Query via EAS GraphQL

```typescript
// Query attestations using the EAS GraphQL API
const query = `
  query GetAttestations($attester: String!) {
    attestations(where: { attester: { equals: $attester } }) {
      id
      data
      recipient
      time
    }
  }
`;

// Use your preferred GraphQL client
const result = await graphqlClient.query(query, { attester: '0x...' });
```

---

## Return Type

```typescript
interface LocationAttestation {
  uid: string;
  geometry: GeoJSON.Geometry;
  geometryType: string;
  srs: string;                // Spatial reference (default: EPSG:4326)
  properties?: Record<string, any>;
  attester: string;
  recipient: string;
  timestamp: number;
  signature: string;
  onchain: boolean;
  uri?: string;               // For offchain attestations
}
```

---

## Coordinate Format

Coordinates use GeoJSON standard: **[longitude, latitude]**

```typescript
// San Francisco
const sf = {
  type: 'Point',
  coordinates: [-122.4194, 37.7749]  // [lon, lat]
};

// Polygon (counterclockwise, closed)
const area = {
  type: 'Polygon',
  coordinates: [[[
    [-122.42, 37.77],
    [-122.41, 37.77],
    [-122.41, 37.78],
    [-122.42, 37.78],
    [-122.42, 37.77]  // Close the ring
  ]]]
};
```

<Card title="Next: EAS Methods" icon="signature" href="/sdk/eas">
  Learn about EAS submission methods
</Card>
